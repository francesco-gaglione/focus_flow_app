{"openapi":"3.1.0","info":{"title":"Focus flow app API","description":"","license":{"name":""},"version":"0.1.0"},"servers":[{"url":"/api","description":"API server"}],"paths":{"/api/categories":{"get":{"tags":["Category"],"operationId":"get_categories_and_tasks_api","responses":{"200":{"description":"Category list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetCategoriesResponseDto"}}}},"500":{"description":"Internal server error"}}},"post":{"tags":["Category"],"operationId":"create_category_api","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}},"required":true},"responses":{"200":{"description":"Category created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryResponseDto"}}}},"400":{"description":"Bad request - validation error"},"409":{"description":"Category already exists"},"500":{"description":"Internal server error"}}}},"/api/categories/{id}":{"put":{"tags":["Category"],"operationId":"update_category_api","parameters":[{"name":"id","in":"path","description":"Category ID to update","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryDto"}}},"required":true},"responses":{"200":{"description":"Category updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryResponseDto"}}}},"400":{"description":"Bad request - validation error"},"404":{"description":"Category not found"},"500":{"description":"Internal server error"}}},"delete":{"tags":["Category"],"description":"Delete a category and its tasks","operationId":"delete_categories_api","parameters":[{"name":"id","in":"path","description":"Category ID to delete","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Category deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteCategoriesResponseDto"}}}},"400":{"description":"Bad request - validation error"},"500":{"description":"Internal server error"}}}},"/api/focus-sessions":{"get":{"tags":["Session"],"operationId":"get_sessions","parameters":[{"name":"startDate","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"endDate","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"categoryIds","in":"query","required":false,"schema":{"type":["array","null"],"items":{"type":"string"}}},{"name":"sessionType","in":"query","required":false,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SessionTypeEnum"}]}},{"name":"minConcentrationScore","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int32"}},{"name":"maxConcentrationScore","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int32"}}],"responses":{"200":{"description":"Sessions fetched successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetSessionFiltersResponseDto"}}}},"400":{"description":"Bad request - validation error"},"500":{"description":"Internal server error"}}}},"/api/focus-sessions/manual":{"post":{"tags":["Session"],"operationId":"create_manual_session_api","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateManualSessionDto"}}},"required":true},"responses":{"201":{"description":"Session created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateManualSessionResponseDto"}}}},"400":{"description":"Bad request - validation error"},"409":{"description":"Session already exists"},"500":{"description":"Internal server error"}}}},"/api/stats/period":{"get":{"tags":["Statistics"],"operationId":"calculate_stats_by_period_api","parameters":[{"name":"startDate","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"endDate","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"}}],"responses":{"200":{"description":"Stats fetched successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetStatsByPeriodResponseDto"}}}},"400":{"description":"Bad request - validation error"},"500":{"description":"Internal server error"}}}},"/api/tasks":{"post":{"tags":["Task"],"operationId":"create_task_api","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskDto"}}},"required":true},"responses":{"201":{"description":"Task created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskResponseDto"}}}},"400":{"description":"Bad request - validation error"},"409":{"description":"Task already exists"},"500":{"description":"Internal server error"}}},"delete":{"tags":["Task"],"operationId":"delete_tasks_api","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteTasksDto"}}},"required":true},"responses":{"200":{"description":"Tasks deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteTasksResponseDto"}}}},"400":{"description":"Bad request - validation error"},"500":{"description":"Internal server error"}}}},"/api/tasks/orphans":{"get":{"tags":["Task"],"operationId":"fetch_orphan_tasks_api","responses":{"200":{"description":"Orphan tasks fetched successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrphanTasksResponseDto"}}}},"500":{"description":"Internal server error"}}}},"/api/tasks/{id}":{"put":{"tags":["Task"],"operationId":"update_task_api","parameters":[{"name":"id","in":"path","description":"Task ID to update","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskDto"}}},"required":true},"responses":{"200":{"description":"Task updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskResponseDto"}}}},"400":{"description":"Bad request - validation error"},"404":{"description":"Task not found"},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"CategoryDistributionDto":{"type":"object","required":["categoryName","categoryId","totalFocusTime","percentage"],"properties":{"categoryId":{"type":"string"},"categoryName":{"type":"string"},"percentage":{"type":"number","format":"float"},"totalFocusTime":{"type":"integer","format":"int64"}}},"CategoryDto":{"type":"object","required":["id","name","color","tasks"],"properties":{"color":{"type":"string"},"description":{"type":["string","null"]},"id":{"type":"string"},"name":{"type":"string"},"tasks":{"type":"array","items":{"$ref":"#/components/schemas/TaskDto"}}}},"ConcentrationPeriodDto":{"type":"string","enum":["MORNING","AFTERNOON"]},"CreateCategoryDto":{"type":"object","required":["name"],"properties":{"color":{"type":["string","null"]},"description":{"type":["string","null"]},"name":{"type":"string"}}},"CreateCategoryResponseDto":{"type":"object","required":["created"],"properties":{"created":{"type":"boolean"}}},"CreateManualSessionDto":{"type":"object","required":["sessionType","startedAt","endedAt"],"properties":{"categoryId":{"type":["string","null"]},"concentrationScore":{"type":["integer","null"],"format":"int32"},"endedAt":{"type":"integer","format":"int64"},"notes":{"type":["string","null"]},"sessionType":{"$ref":"#/components/schemas/SessionTypeEnum"},"startedAt":{"type":"integer","format":"int64"},"taskId":{"type":["string","null"]}}},"CreateManualSessionResponseDto":{"type":"object","required":["id"],"properties":{"id":{"type":"string"}}},"CreateTaskDto":{"type":"object","required":["name"],"properties":{"categoryId":{"type":["string","null"]},"description":{"type":["string","null"]},"name":{"type":"string"},"scheduledDate":{"type":["integer","null"],"format":"int64"}}},"CreateTaskResponseDto":{"type":"object","required":["id"],"properties":{"id":{"type":"string"}}},"DailyActivityDistributionDto":{"type":"object","required":["categoryName","categoryId","totalFocusTime"],"properties":{"categoryId":{"type":"string"},"categoryName":{"type":"string"},"totalFocusTime":{"type":"integer","format":"int64"}}},"DailyActivityDto":{"type":"object","required":["date","categoryDistribution"],"properties":{"categoryDistribution":{"type":"array","items":{"$ref":"#/components/schemas/DailyActivityDistributionDto"}},"date":{"type":"integer","format":"int64"}}},"DeleteCategoriesDto":{"type":"object","required":["id"],"properties":{"id":{"type":"string"}}},"DeleteCategoriesResponseDto":{"type":"object","required":["deleted_ids"],"properties":{"deleted_ids":{"type":"array","items":{"type":"string"}}}},"DeleteTasksDto":{"type":"object","required":["taskIds"],"properties":{"taskIds":{"type":"array","items":{"type":"string"}}}},"DeleteTasksResponseDto":{"type":"object","required":["deleted_ids"],"properties":{"deleted_ids":{"type":"array","items":{"type":"string"}}}},"FocusSessionDto":{"type":"object","required":["id","sessionType","startedAt","createdAt"],"properties":{"actualDuration":{"type":["integer","null"],"format":"int64"},"categoryId":{"type":["string","null"]},"concentrationScore":{"type":["integer","null"],"format":"int32"},"createdAt":{"type":"integer","format":"int64"},"endedAt":{"type":["integer","null"],"format":"int64"},"id":{"type":"string"},"notes":{"type":["string","null"]},"sessionType":{"$ref":"#/components/schemas/SessionTypeEnum"},"startedAt":{"type":"integer","format":"int64"},"taskId":{"type":["string","null"]}}},"GetCategoriesResponseDto":{"type":"object","required":["categories"],"properties":{"categories":{"type":"array","items":{"$ref":"#/components/schemas/CategoryDto"}}}},"GetSessionFiltersDto":{"type":"object","properties":{"categoryIds":{"type":["array","null"],"items":{"type":"string"}},"endDate":{"type":["integer","null"],"format":"int64"},"maxConcentrationScore":{"type":["integer","null"],"format":"int32","example":"5"},"minConcentrationScore":{"type":["integer","null"],"format":"int32","example":"1"},"sessionType":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/SessionTypeEnum"}]},"startDate":{"type":["integer","null"],"format":"int64"}}},"GetSessionFiltersResponseDto":{"type":"object","required":["focusSessions"],"properties":{"focusSessions":{"type":"array","items":{"$ref":"#/components/schemas/FocusSessionDto"}}}},"GetStatsByPeriodDto":{"type":"object","required":["startDate"],"properties":{"endDate":{"type":["integer","null"],"format":"int64"},"startDate":{"type":"integer","format":"int64"}}},"GetStatsByPeriodResponseDto":{"type":"object","required":["totalSessions","totalBreaks","totalFocusTime","totalBreakTime","mostConcentratedPeriod","lessConcentratedPeriod","concentrationDistribution","categoryDistribution","taskDistribution","dailyActivity"],"properties":{"categoryDistribution":{"type":"array","items":{"$ref":"#/components/schemas/CategoryDistributionDto"}},"concentrationDistribution":{"type":"array","items":{"type":"integer","format":"int32","minimum":0}},"dailyActivity":{"type":"array","items":{"$ref":"#/components/schemas/DailyActivityDto"}},"lessConcentratedPeriod":{"$ref":"#/components/schemas/ConcentrationPeriodDto"},"mostConcentratedPeriod":{"$ref":"#/components/schemas/ConcentrationPeriodDto"},"taskDistribution":{"type":"array","items":{"$ref":"#/components/schemas/TaskDistributionDto"}},"totalBreakTime":{"type":"integer","format":"int64"},"totalBreaks":{"type":"integer","minimum":0},"totalFocusTime":{"type":"integer","format":"int64"},"totalSessions":{"type":"integer","minimum":0}}},"OrphanTasksResponseDto":{"type":"object","required":["orphanTasks"],"properties":{"orphanTasks":{"type":"array","items":{"$ref":"#/components/schemas/TaskDto"}}}},"SessionTypeEnum":{"type":"string","enum":["Work","ShortBreak","LongBreak"]},"TaskDistributionDto":{"type":"object","required":["taskName","totalFocusTime","percentage"],"properties":{"categoryId":{"type":["string","null"]},"categoryName":{"type":["string","null"]},"percentage":{"type":"number","format":"float"},"taskName":{"type":"string"},"totalFocusTime":{"type":"integer","format":"int64"}}},"TaskDto":{"type":"object","required":["id","name"],"properties":{"categoryId":{"type":["string","null"]},"completedAt":{"type":["integer","null"],"format":"int64"},"description":{"type":["string","null"]},"id":{"type":"string"},"name":{"type":"string"},"scheduledDate":{"type":["integer","null"],"format":"int64"}}},"UpdateCategoryDto":{"type":"object","properties":{"color":{"type":["string","null"]},"description":{"type":["string","null"]},"name":{"type":["string","null"]}}},"UpdateCategoryResponseDto":{"type":"object","required":["updatedCategory"],"properties":{"updatedCategory":{"$ref":"#/components/schemas/CategoryDto"}}},"UpdateTaskDto":{"type":"object","properties":{"categoryId":{"type":["string","null"]},"completedAt":{"type":["integer","null"],"format":"int64"},"description":{"type":["string","null"]},"name":{"type":["string","null"]},"scheduledDate":{"type":["integer","null"],"format":"int64"}}},"UpdateTaskResponseDto":{"type":"object","required":["updatedTask"],"properties":{"updatedTask":{"$ref":"#/components/schemas/TaskDto"}}}}},"tags":[{"name":"Category","description":"Category items management API"},{"name":"Task","description":"Task items management API"},{"name":"Session","description":"Sessions items management API"},{"name":"Statistics","description":"Statistics management API"}]}